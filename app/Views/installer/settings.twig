{% extends 'installer/_layout.twig' %}
{% block title %}Site Settings - Cimaise Installer{% endblock %}
{% block steps %}
<div class="step-indicator">
    <div class="step completed">
        <div class="step-number">1</div>
        <div class="step-label">Welcome</div>
    </div>
    <div class="step completed">
        <div class="step-number">2</div>
        <div class="step-label">Database</div>
    </div>
    <div class="step completed">
        <div class="step-number">3</div>
        <div class="step-label">Admin User</div>
    </div>
    <div class="step active">
        <div class="step-number">4</div>
        <div class="step-label">Settings</div>
    </div>
    <div class="step">
        <div class="step-number">5</div>
        <div class="step-label">Install</div>
    </div>
</div>
{% endblock %}
{% block content %}
<h3 class="mb-4"><i class="fas fa-cog me-2"></i>Site Settings</h3>

<p class="text-muted">Configure your site information. <span class="text-danger" aria-hidden="true">*</span> <span class="visually-hidden">Required field</span> indicates a required field.</p>

<form method="post" action="{{ base_path }}/install/settings" enctype="multipart/form-data">
    <input type="hidden" name="csrf" value="{{ csrf }}">

    <div class="mb-3">
        <label for="site-title" class="form-label">Site Title <span class="text-danger" aria-hidden="true">*</span><span class="visually-hidden">Required field</span></label>
        <input type="text" id="site-title" class="form-control" name="site_title" autocomplete="organization" value="{{ site_title }}" required>
        <div class="form-text">Your website's name (shown in browser tab and headers)</div>
    </div>

    <div class="mb-3">
        <label class="form-label">Site Description</label>
        <textarea class="form-control" name="site_description" rows="3">{{ site_description }}</textarea>
        <div class="form-text">A brief description of your website (used for SEO)</div>
    </div>

    <div class="mb-3">
        <label for="site-logo" class="form-label">Site Logo <span class="text-muted">(Optional)</span></label>
        <input type="file" id="site-logo" class="form-control" name="site_logo" accept="image/png,image/jpeg,image/webp">
        <div class="form-text">Upload a logo for your site (PNG, JPEG, or WebP)</div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-copyright" class="form-label">Copyright Text</label>
                <input type="text" id="site-copyright" class="form-control" name="site_copyright" value="{{ site_copyright }}">
                <div class="form-text">Appears in footer. Use <code>&amp;copy;</code> for &copy; symbol</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-email" class="form-label">Contact Email <span class="text-danger" aria-hidden="true">*</span><span class="visually-hidden">Required field</span></label>
                <input type="email" id="site-email" class="form-control" name="site_email" autocomplete="email" value="{{ site_email }}" required>
                <div class="form-text">Primary contact email for the site</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-language" class="form-label">Site Language</label>
                <select id="site-language" class="form-control" name="site_language">
                    <option value="en" {{ site_language|default('en') == 'en' ? 'selected' }}>English</option>
                    <option value="it" {{ site_language == 'it' ? 'selected' }}>Italiano</option>
                </select>
                <div class="form-text">Language for the public-facing website</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="admin-language" class="form-label">Admin Language</label>
                <select id="admin-language" class="form-control" name="admin_language">
                    <option value="en" {{ admin_language|default('en') == 'en' ? 'selected' }}>English</option>
                    <option value="it" {{ admin_language == 'it' ? 'selected' }}>Italiano</option>
                </select>
                <div class="form-text">Language for the administration panel</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="date-format" class="form-label">Date Format</label>
                <select id="date-format" class="form-control" name="date_format">
                    <option value="Y-m-d" {{ date_format|default('Y-m-d') == 'Y-m-d' ? 'selected' }}>{{ "now"|date("Y-m-d") }} (ISO)</option>
                    <option value="d-m-Y" {{ date_format == 'd-m-Y' ? 'selected' }}>{{ "now"|date("d-m-Y") }} (European)</option>
                </select>
                <div class="form-text">How dates are displayed throughout the site</div>
            </div>
        </div>
    </div>

    <h5 class="mb-3 mt-4"><i class="fas fa-tachometer-alt me-2"></i>Performance Settings</h5>
    <p class="text-muted mb-3">Configure caching and performance optimizations.</p>

    <div class="row">
        <div class="col-md-6">
            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" id="cache-enabled" name="cache_enabled" value="1" {{ cache_enabled|default(true) ? 'checked' }}>
                <label class="form-check-label" for="cache-enabled">
                    Enable Caching
                </label>
                <div class="form-text">Cache pages for better performance (recommended)</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" id="compression-enabled" name="compression_enabled" value="1" {{ compression_enabled|default(true) ? 'checked' }}>
                <label class="form-check-label" for="compression-enabled">
                    Enable Compression
                </label>
                <div class="form-text">Compress responses for faster loading (recommended)</div>
            </div>
        </div>
    </div>

    <div class="alert alert-info">
        <h5><i class="fas fa-lightbulb me-2"></i>Default Content</h5>
        <p>The following default content will be created:</p>
        <ul class="mb-0">
            <li>Sample categories (Landscape, Portrait, etc.)</li>
            <li>Default homepage and gallery templates</li>
            <li>Standard image processing settings</li>
        </ul>
    </div>

    <div class="d-grid gap-2 d-md-flex justify-content-md-between">
        <a href="{{ base_path }}/install/admin" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>Back
        </a>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-check me-2"></i>Continue
        </button>
    </div>
</form>
{% endblock %}
