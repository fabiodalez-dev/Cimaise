import{H as e}from"./home-progressive-loader-fswPtzne.js";!function(){function t(e=3){if(!("IntersectionObserver"in window))return null;let t=0;const n=new IntersectionObserver((n,o)=>{n.forEach(n=>{if(!n.isIntersecting)return;const r=n.target;t<e&&(r.setAttribute("fetchpriority","high"),r.removeAttribute("loading"),t+=1),o.unobserve(r)})},{rootMargin:"200px 0px 200px 0px",threshold:.1});return{observe(e){Array.from(e||[]).forEach(e=>n.observe(e))}}}function n(e){return Array.isArray(e)&&0!==e.length?e.join(", "):""}var o;o=()=>{document.documentElement.classList.add("no-lenis");const o=document.querySelector(".masonry-grid");if(!o)return;const r=window.homeLoaderConfig||null;if(!r||!r.hasMore){const e=t(3);return void(e&&e.observe(o.querySelectorAll("img")))}const s=document.getElementById("home-load-trigger"),a=document.getElementById("masonry-loading"),i=r.basePath||"",d=Number.parseInt(r.maxImages,10)||0,c=t(3);c&&c.observe(o.querySelectorAll("img"));let l=null;const m=e=>{a&&(a.classList.toggle("is-visible",e),a.setAttribute("aria-hidden",e?"false":"true"))};l=new e({apiUrl:`${i}/api/home/gallery`,container:o,shownImageIds:r.shownImageIds||[],shownAlbumIds:r.shownAlbumIds||[],batchSize:24,extraParams:{mode:"masonry"},renderImage:e=>{var t,r,s;if(d>0&&l.shownImageIds.size>=d)return l.hasMore=!1,l.disconnect(),void m(!1);const a=document.createElement("div");a.className="masonry-item";const u=document.createElement("a");u.href=`${i}/album/${encodeURIComponent(e.album_slug||"")}`;const h=document.createElement("picture"),g=n(null==(t=e.sources)?void 0:t.avif),p=n(null==(r=e.sources)?void 0:r.webp),b=n(null==(s=e.sources)?void 0:s.jpg);if(g){const e=document.createElement("source");e.type="image/avif",e.srcset=g,h.appendChild(e)}if(p){const e=document.createElement("source");e.type="image/webp",e.srcset=p,h.appendChild(e)}if(b){const e=document.createElement("source");e.type="image/jpeg",e.srcset=b,h.appendChild(e)}const v=document.createElement("img"),f=e.fallback_src||e.url||"";v.src=f,v.alt=e.alt||e.album_title||"",v.width=e.width||800,v.height=e.height||600,v.loading="lazy",v.style.aspectRatio=`${v.width} / ${v.height}`,h.appendChild(v),u.appendChild(h),a.appendChild(u),o.appendChild(a),c&&c.observe([v])}});const u=l.loadMore.bind(l);l.loadMore=async()=>{m(!0),await u(),m(l.hasMore)},s&&l.observe(s),l.startBackgroundLoading()},"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o)}();
