import{H as e}from"./home-progressive-loader-BTmqzQak.js";import{c as t}from"./fetch-priority-observer-C6H-QDdu.js";!function(){function n(e=3){const n=t(e);return n?{observe(e){Array.from(e||[]).forEach(e=>n.observe(e))}}:null}function o(e){return Array.isArray(e)&&0!==e.length?e.join(", "):""}var r;r=()=>{document.documentElement.classList.add("no-lenis");const t=document.querySelector(".masonry-grid");if(!t)return;const r=window.homeLoaderConfig||null;if(!r||!r.hasMore){const e=n(3);return void(e&&e.observe(t.querySelectorAll("img")))}const s=document.getElementById("home-load-trigger"),i=document.getElementById("masonry-loading"),a=r.basePath||"",d=Number.parseInt(r.maxImages,10)||0,c=n(3);c&&c.observe(t.querySelectorAll("img"));let l=null;const m=e=>{i&&(i.classList.toggle("is-visible",e),i.setAttribute("aria-hidden",e?"false":"true"))};l=new e({apiUrl:`${a}/api/home/gallery`,container:t,shownImageIds:r.shownImageIds||[],shownAlbumIds:r.shownAlbumIds||[],batchSize:24,extraParams:{mode:"masonry"},renderImage:e=>{var n,r,s;if(!l)return;if(d>0&&l.shownImageIds.size>=d)return l.hasMore=!1,l.disconnect(),void m(!1);const i=document.createElement("div");i.className="masonry-item";const u=document.createElement("a");u.href=`${a}/album/${encodeURIComponent(e.album_slug||"")}`;const h=document.createElement("picture"),p=o(null==(n=e.sources)?void 0:n.avif),g=o(null==(r=e.sources)?void 0:r.webp),v=o(null==(s=e.sources)?void 0:s.jpg);if(p){const e=document.createElement("source");e.type="image/avif",e.srcset=p,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",h.appendChild(e)}if(g){const e=document.createElement("source");e.type="image/webp",e.srcset=g,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",h.appendChild(e)}if(v){const e=document.createElement("source");e.type="image/jpeg",e.srcset=v,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",h.appendChild(e)}const w=document.createElement("img"),y=e.fallback_src||e.url||"";w.src=y,w.alt=e.alt||e.album_title||"",w.width=e.width||800,w.height=e.height||600,w.loading="lazy",w.decoding="async",w.style.aspectRatio=`${w.width} / ${w.height}`,h.appendChild(w),u.appendChild(h),i.appendChild(u),t.appendChild(i),c&&c.observe([w])}});const u=l.loadMore.bind(l);l.loadMore=async()=>{m(!0),await u(),m(l.hasMore)},s&&l.observe(s),setTimeout(()=>{l.startBackgroundLoading()},1500)},"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)}();
