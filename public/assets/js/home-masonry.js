import{H as e}from"./home-progressive-loader-fswPtzne.js";!function(){function t(e=3){if(!("IntersectionObserver"in window))return null;let t=0;const n=new IntersectionObserver((n,o)=>{n.forEach(n=>{if(!n.isIntersecting)return;const r=n.target;t<e&&(r.setAttribute("fetchpriority","high"),r.removeAttribute("loading"),t+=1),o.unobserve(r)})},{rootMargin:"200px 0px 200px 0px",threshold:.1});return{observe(e){Array.from(e||[]).forEach(e=>n.observe(e))}}}function n(e){return Array.isArray(e)&&0!==e.length?e.join(", "):""}var o;o=()=>{document.documentElement.classList.add("no-lenis");const o=document.querySelector(".masonry-grid");if(!o)return;const r=window.homeLoaderConfig||null;if(!r||!r.hasMore){const e=t(3);return void(e&&e.observe(o.querySelectorAll("img")))}const i=document.getElementById("home-load-trigger"),s=document.getElementById("masonry-loading"),a=r.basePath||"",d=Number.parseInt(r.maxImages,10)||0,c=t(3);c&&c.observe(o.querySelectorAll("img"));let l=null;const m=e=>{s&&(s.classList.toggle("is-visible",e),s.setAttribute("aria-hidden",e?"false":"true"))};l=new e({apiUrl:`${a}/api/home/gallery`,container:o,shownImageIds:r.shownImageIds||[],shownAlbumIds:r.shownAlbumIds||[],batchSize:24,extraParams:{mode:"masonry"},renderImage:e=>{var t,r,i;if(!l)return;if(d>0&&l.shownImageIds.size>=d)return l.hasMore=!1,l.disconnect(),void m(!1);const s=document.createElement("div");s.className="masonry-item";const u=document.createElement("a");u.href=`${a}/album/${encodeURIComponent(e.album_slug||"")}`;const h=document.createElement("picture"),p=n(null==(t=e.sources)?void 0:t.avif),g=n(null==(r=e.sources)?void 0:r.webp),v=n(null==(i=e.sources)?void 0:i.jpg);if(p){const e=document.createElement("source");e.type="image/avif",e.srcset=p,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",h.appendChild(e)}if(g){const e=document.createElement("source");e.type="image/webp",e.srcset=g,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",h.appendChild(e)}if(v){const e=document.createElement("source");e.type="image/jpeg",e.srcset=v,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",h.appendChild(e)}const w=document.createElement("img"),b=e.fallback_src||e.url||"";w.src=b,w.alt=e.alt||e.album_title||"",w.width=e.width||800,w.height=e.height||600,w.loading="lazy",w.decoding="async",w.style.aspectRatio=`${w.width} / ${w.height}`,h.appendChild(w),u.appendChild(h),s.appendChild(u),o.appendChild(s),c&&c.observe([w])}});const u=l.loadMore.bind(l);l.loadMore=async()=>{m(!0),await u(),m(l.hasMore)},i&&l.observe(i),l.startBackgroundLoading()},"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o)}();
