document.addEventListener("DOMContentLoaded",function(){const e=()=>window.innerWidth<768,t=document.querySelector(".inf-work_list"),n=document.querySelector(".work-layout");let o=Array.from(document.querySelectorAll(".inf-work_item")),r=[],s=[],i=[],l=!1,a=!1,c=0,d=0,u=0,m=0,f=0,h=0,y=!1;let p=null;const v=()=>{r=Array.from(document.querySelectorAll(".inf-work_item")),o=r,s=r.filter((e,t)=>t%2==0),i=r.filter((e,t)=>t%2==1)};v();const g=()=>{if(!r[0])return;const e=r[0].clientHeight;e>0&&e!==m&&(m=e,f=r.length/2*m,y=!0,"function"==typeof p&&p())};let L=null;const w=()=>{document.querySelectorAll(".inf-work_item img").forEach(e=>{if(e.dataset.dimensionsSetup)return;e.dataset.dimensionsSetup="true";const t=()=>{L||(L=setTimeout(()=>{L=null,v(),g()},0))};e.addEventListener("load",t,{once:!0}),e.addEventListener("error",t,{once:!0}),e.complete&&t()})},E=e=>{e.forEach(e=>{e.style.transform=""})},S=(e,t)=>{e.forEach(e=>{e.style.willChange=t?"transform":""})},A=(t,n)=>{e()||!a||l||n.forEach((e,n)=>{const o=((n*m+t)%f+f)%f-m;e.style.transform=`translate(0px, ${o}px)`})},k=Array.from(document.querySelectorAll(".grid-toggle_item[data-filter]")),q=(n,c)=>{k.forEach(e=>e.classList.remove("is-active")),c&&c.classList.add("is-active");const m=Array.from(document.querySelectorAll(".inf-work_item"));"all"===n?(m.forEach(e=>{e.style.display=""}),(()=>{if(t&&(l=!1,t.classList.remove("filtered-layout"),!e())){v();const e=r,t=i;a&&(A(d,s),A(u,t),S(e,!0))}})()):(t&&(l=!0,E(o),t.classList.add("filtered-layout"),t.classList.remove("simple-layout"),S(o,!1)),m.forEach(e=>{e.classList.contains("category-"+n)?e.style.display="":e.style.display="none"}));const f=document.querySelector(".photos_total");if(f){const e=document.querySelectorAll('.inf-work_item:not([style*="display: none"])');f.textContent=e.length}},_=k.length?k[0].closest(".work-toggle_holder"):null;_&&_.addEventListener("click",e=>{const t=e.target.closest(".grid-toggle_item[data-filter]");if(!t)return;const n=t.getAttribute("data-filter")||"all";"all"!==n&&"a"===t.tagName.toLowerCase()||(e.preventDefault(),q(n,t))});const b=document.querySelector(".menu-btn"),x=document.querySelector(".menu-close"),C=document.querySelector(".menu-component");function M(){C&&(C.classList.remove("is-open"),document.body.style.overflow="")}b&&b.addEventListener("click",function(){C&&(C.classList.add("is-open"),document.body.style.overflow="hidden")}),x&&x.addEventListener("click",M),document.addEventListener("keydown",function(e){"Escape"===e.key&&M()});document.querySelectorAll(".mega-menu_link.is-current").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),M()})});document.querySelectorAll(".mega-menu_link").forEach(e=>{const t=e.textContent;e.innerHTML="";const n=document.createElement("div");n.className="mega-menu_scroll-wrapper";const o=document.createElement("span");o.textContent=t,o.className="mega-menu_text";const r=document.createElement("span");r.textContent=t,r.className="mega-menu_text",n.appendChild(o),n.appendChild(r),e.appendChild(n)});const D=document.querySelector(".page-transition");let N;document.querySelectorAll(".inf-work_item").forEach(e=>e.classList.add("is-visible")),(()=>{if(!("IntersectionObserver"in window))return;const e=Array.from(document.querySelectorAll(".inf-work_item img"));if(!e.length)return;let t=0;const n=new IntersectionObserver((e,n)=>{e.forEach(e=>{if(!e.isIntersecting)return;const o=e.target;t<3&&(o.setAttribute("fetchpriority","high"),o.removeAttribute("loading"),t+=1),n.unobserve(o)})},{rootMargin:"200px 0px 200px 0px",threshold:.1});e.forEach(e=>n.observe(e))})(),(()=>{if(v(),!t||0===o.length||e())return t&&(t.classList.add("simple-layout"),E(o)),void S(o,!1);(()=>{if(!t||0===o.length)return;const e=Array.from(document.querySelectorAll(".inf-work_item:not(.is-clone)")),n=e.length;if(n>=8)return;if(0===n)return;const r=Math.ceil(8/n)*n-n;for(let o=0;o<r;o++){const r=e[o%n].cloneNode(!0);r.classList.add("is-clone"),r.removeAttribute("id"),t.appendChild(r)}v()})();const g=r,L=s,k=i;if(g.length<4)return t.classList.add("simple-layout"),g.forEach(e=>e.classList.add("is-visible")),void S(g,!1);a=!0,t.classList.remove("simple-layout"),t.classList.remove("filtered-layout"),S(g,!0),m=g[0].clientHeight||400,f=g.length/2*m,w(),A(0,L),A(0,k),g.forEach(e=>e.classList.add("is-visible"));let q=!1,_=0;const b=()=>{if(e()||!a||l)return void(q=!1);const t=Math.abs(c-h),n=Math.abs(c-d)+Math.abs(c-u),o=performance.now()-_<200;if(t>.05||n>.2||y||o){y=!1,h=c;const e=i;d+=.08*(c-d),u+=.07*(c-u),A(d,s),A(u,e),requestAnimationFrame(b)}else q=!1},x=()=>{q||(q=!0,requestAnimationFrame(b))};x(),p=x;const C=t=>{e()||!a||l||(c-=t.deltaY,y=!0,_=performance.now(),x())};n&&(n.removeEventListener("wheel",C),n.addEventListener("wheel",C,{passive:!0}))})(),(()=>{const n=document.querySelectorAll("[data-inf-item]"),o=document.querySelector(".image-grid-info_holder"),r=document.querySelector("[data-image-grid-title]"),s=document.querySelector("[data-image-grid-copy]");n.forEach(i=>{if(i.dataset.hoverSetup)return;i.dataset.hoverSetup="true";const l=i.getAttribute("data-work-title")||"",a=i.getAttribute("data-work-copy")||"";i.addEventListener("mouseenter",function(){e()||(this.classList.add("highlight"),t&&t.classList.add("has-hover"),o&&o.classList.add("show"),r&&(r.textContent=l),s&&(s.textContent=a))}),i.addEventListener("mouseleave",function(){e()||(this.classList.remove("highlight"),t&&t.classList.remove("has-hover"),o&&o.classList.remove("show"))}),i.addEventListener("click",function(t){if(!e())return;this.classList.contains("show-description")||(t.preventDefault(),n.forEach(e=>{e.classList.remove("show-description")}),this.classList.add("show-description"))})})})(),document.querySelectorAll(".inf-work_link").forEach(t=>{t.dataset.transitionSetup||(t.dataset.transitionSetup="true",t.addEventListener("click",function(t){if(e()){const e=this.closest(".inf-work_item");if(!e||!e.classList.contains("show-description"))return}t.preventDefault();const n=this.getAttribute("href");D?(D.classList.add("is-active"),setTimeout(()=>{window.location.href=n},600)):window.location.href=n}))}),window.addEventListener("resize",()=>{clearTimeout(N),N=setTimeout(()=>{e()?(E(o),null==t||t.classList.add("simple-layout"),S(o,!1)):l||(v(),g(),S(r,a&&!l))},100)})});
