document.addEventListener("DOMContentLoaded",function(){const e=()=>window.innerWidth<768,t=document.querySelector(".inf-work_list"),n=document.querySelector(".work-layout");let o=Array.from(document.querySelectorAll(".inf-work_item")),r=[],s=[],i=[],l=!1,a=!1,c=0,d=0,u=0,m=0,f=0,h=0,y=!1;let p=null;let v=null;const g=()=>{r=Array.from(document.querySelectorAll(".inf-work_item")),o=r,s=r.filter((e,t)=>t%2==0),i=r.filter((e,t)=>t%2==1)};g();const L=()=>{if(!r[0])return;const e=r[0].clientHeight;e>0&&e!==m&&(m=e,f=r.length/2*m,y=!0,"function"==typeof p&&p())};let w=null;const E=()=>{document.querySelectorAll(".inf-work_item img").forEach(e=>{if(e.dataset.dimensionsSetup)return;e.dataset.dimensionsSetup="true";const t=()=>{w||(w=setTimeout(()=>{w=null,g(),L()},0))};e.addEventListener("load",t,{once:!0}),e.addEventListener("error",t,{once:!0}),e.complete&&t()})},S=e=>{e.forEach(e=>{e.style.transform=""})},A=(e,t)=>{e.forEach(e=>{e.style.willChange=t?"transform":""})},k=(t,n)=>{e()||!a||l||n.forEach((e,n)=>{const o=((n*m+t)%f+f)%f-m;e.style.transform=`translate(0px, ${o}px)`})},q=Array.from(document.querySelectorAll(".grid-toggle_item[data-filter]")),_=(n,c)=>{q.forEach(e=>e.classList.remove("is-active")),c&&c.classList.add("is-active");const m=Array.from(document.querySelectorAll(".inf-work_item"));"all"===n?(m.forEach(e=>{e.style.display=""}),(()=>{if(t&&(l=!1,t.classList.remove("filtered-layout"),!e())){g();const e=r,t=i;a&&(k(d,s),k(u,t),A(e,!0))}})()):(t&&(l=!0,S(o),t.classList.add("filtered-layout"),t.classList.remove("simple-layout"),A(o,!1)),m.forEach(e=>{e.classList.contains("category-"+n)?e.style.display="":e.style.display="none"}));const f=document.querySelector(".photos_total");if(f){const e=document.querySelectorAll('.inf-work_item:not([style*="display: none"])');f.textContent=e.length}},b=q.length?q[0].closest(".work-toggle_holder"):null;b&&b.addEventListener("click",e=>{const t=e.target.closest(".grid-toggle_item[data-filter]");if(!t)return;const n=t.getAttribute("data-filter")||"all";e.preventDefault(),_(n,t)});const x=document.querySelector(".menu-btn"),C=document.querySelector(".menu-close"),M=document.querySelector(".menu-component");function D(){M&&(M.classList.remove("is-open"),document.body.style.overflow="")}x&&x.addEventListener("click",function(){M&&(M.classList.add("is-open"),document.body.style.overflow="hidden")}),C&&C.addEventListener("click",D),document.addEventListener("keydown",function(e){"Escape"===e.key&&D()});document.querySelectorAll(".mega-menu_link.is-current").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),D()})});document.querySelectorAll(".mega-menu_link").forEach(e=>{if(e.querySelector(".mega-menu_scroll-wrapper"))return;const t=e.textContent;if(!t||!t.trim())return;e.innerHTML="";const n=document.createElement("span");n.className="mega-menu_scroll-wrapper";const o=document.createElement("span");o.textContent=t,o.className="mega-menu_text";const r=document.createElement("span");r.textContent=t,r.className="mega-menu_text",r.setAttribute("aria-hidden","true"),n.appendChild(o),n.appendChild(r),e.appendChild(n)});const T=document.querySelector(".page-transition");let N;document.querySelectorAll(".inf-work_item").forEach(e=>e.classList.add("is-visible")),(()=>{if(!("IntersectionObserver"in window))return;const e=Array.from(document.querySelectorAll(".inf-work_item img"));if(!e.length)return;let t=0;const n=new IntersectionObserver((e,n)=>{e.forEach(e=>{if(!e.isIntersecting)return;const o=e.target;t<3&&(o.setAttribute("fetchpriority","high"),o.removeAttribute("loading"),t+=1),n.unobserve(o)})},{rootMargin:"200px 0px 200px 0px",threshold:.1});e.forEach(e=>n.observe(e))})(),(()=>{if(g(),!t||0===o.length||e())return t&&(t.classList.add("simple-layout"),S(o)),void A(o,!1);(()=>{if(!t||0===o.length)return;const e=Array.from(document.querySelectorAll(".inf-work_item:not(.is-clone)")),n=e.length;if(n>=8)return;if(0===n)return;const r=Math.ceil(8/n)*n-n;for(let o=0;o<r;o++){const r=e[o%n].cloneNode(!0);r.classList.add("is-clone"),r.removeAttribute("id"),t.appendChild(r)}g()})();const L=r,w=s,q=i;if(L.length<4)return t.classList.add("simple-layout"),L.forEach(e=>e.classList.add("is-visible")),void A(L,!1);a=!0,t.classList.remove("simple-layout"),t.classList.remove("filtered-layout"),A(L,!0),m=L[0].clientHeight||400,f=L.length/2*m,E(),k(0,w),k(0,q),L.forEach(e=>e.classList.add("is-visible"));let _=!1,b=0;const x=()=>{if(e()||!a||l)return void(_=!1);const t=Math.abs(c-h),n=Math.abs(c-d)+Math.abs(c-u),o=performance.now()-b<200;if(t>.05||n>.2||y||o){y=!1,h=c;const e=i;d+=.08*(c-d),u+=.07*(c-u),k(d,s),k(u,e),requestAnimationFrame(x)}else _=!1},C=()=>{_||(_=!0,requestAnimationFrame(x))};C(),p=C;const M=t=>{e()||!a||l||(c-=t.deltaY,y=!0,b=performance.now(),C())};n&&(v&&n.removeEventListener("wheel",v),v=M,n.addEventListener("wheel",v,{passive:!0}))})(),(()=>{const n=document.querySelectorAll("[data-inf-item]"),o=document.querySelector(".image-grid-info_holder"),r=document.querySelector("[data-image-grid-title]"),s=document.querySelector("[data-image-grid-copy]");n.forEach(i=>{if(i.dataset.hoverSetup)return;i.dataset.hoverSetup="true";const l=i.getAttribute("data-work-title")||"",a=i.getAttribute("data-work-copy")||"";i.addEventListener("mouseenter",function(){e()||(this.classList.add("highlight"),t&&t.classList.add("has-hover"),o&&o.classList.add("show"),r&&(r.textContent=l),s&&(s.textContent=a))}),i.addEventListener("mouseleave",function(){e()||(this.classList.remove("highlight"),t&&t.classList.remove("has-hover"),o&&o.classList.remove("show"))}),i.addEventListener("click",function(t){if(!e())return;this.classList.contains("show-description")||(t.preventDefault(),n.forEach(e=>{e.classList.remove("show-description")}),this.classList.add("show-description"))})})})(),document.querySelectorAll(".inf-work_link").forEach(t=>{t.dataset.transitionSetup||(t.dataset.transitionSetup="true",t.addEventListener("click",function(t){if(e()){const e=this.closest(".inf-work_item");if(!e||!e.classList.contains("show-description"))return}t.preventDefault();const n=this.getAttribute("href");T?(T.classList.add("is-active"),setTimeout(()=>{window.location.href=n},600)):window.location.href=n}))}),window.addEventListener("resize",()=>{clearTimeout(N),N=setTimeout(()=>{e()?(S(o),null==t||t.classList.add("simple-layout"),A(o,!1)):l||(g(),L(),A(r,a&&!l))},100)})});
