import{c as e}from"./fetch-priority-observer-C6H-QDdu.js";document.addEventListener("DOMContentLoaded",function(){const t=()=>window.innerWidth<768,n=document.querySelector(".inf-work_list"),o=document.querySelector(".work-layout");let s=Array.from(document.querySelectorAll(".inf-work_item")),r=[],i=[],l=[],a=!1,c=!1,d=0,u=0,m=0,f=0,h=0,y=0,p=!1;let v=null;let L=null;const g=()=>{r=Array.from(document.querySelectorAll(".inf-work_item")),s=r,i=r.filter((e,t)=>t%2==0),l=r.filter((e,t)=>t%2==1)};g();const w=()=>{if(!r[0])return;const e=r[0].clientHeight;e>0&&e!==f&&(f=e,h=r.length/2*f,p=!0,"function"==typeof v&&v())};let E=null;const S=()=>{document.querySelectorAll(".inf-work_item img").forEach(e=>{if(e.dataset.dimensionsSetup)return;e.dataset.dimensionsSetup="true";const t=()=>{E||(E=setTimeout(()=>{E=null,g(),w()},0))};e.addEventListener("load",t,{once:!0}),e.addEventListener("error",t,{once:!0}),e.complete&&t()})},A=e=>{e.forEach(e=>{e.style.transform=""})},k=(e,t)=>{e.forEach(e=>{e.style.willChange=t?"transform":""})},q=(e,n)=>{t()||!c||a||n.forEach((t,n)=>{const o=((n*f+e)%h+h)%h-f;t.style.transform=`translate(0px, ${o}px)`})},_=Array.from(document.querySelectorAll(".grid-toggle_item[data-filter]")),b=(e,o)=>{_.forEach(e=>e.classList.remove("is-active")),o&&o.classList.add("is-active");const d=Array.from(document.querySelectorAll(".inf-work_item"));"all"===e?(d.forEach(e=>{e.style.display="",e.classList.remove("is-hidden")}),(()=>{if(n&&(a=!1,n.classList.remove("filtered-layout"),!t())){g();const e=r,t=l;c&&(q(u,i),q(m,t),k(e,!0))}})()):(n&&(a=!0,A(s),n.classList.add("filtered-layout"),n.classList.remove("simple-layout"),k(s,!1)),d.forEach(t=>{t.classList.contains("category-"+e)?(t.style.display="",t.classList.remove("is-hidden")):(t.style.display="none",t.classList.add("is-hidden"))}));const f=document.querySelector(".photos_total");if(f){const e=document.querySelectorAll(".inf-work_item:not(.is-hidden)");f.textContent=e.length}},C=_.length?_[0].closest(".work-toggle_holder"):null;C&&C.addEventListener("click",e=>{const t=e.target.closest(".grid-toggle_item[data-filter]");if(!t)return;const n=t.getAttribute("data-filter")||"all";e.preventDefault(),b(n,t)});const x=document.querySelector(".menu-btn"),M=document.querySelector(".menu-close"),D=document.querySelector(".menu-component");function T(){D&&(D.classList.remove("is-open"),document.body.style.overflow="")}x&&x.addEventListener("click",function(){D&&(D.classList.add("is-open"),document.body.style.overflow="hidden")}),M&&M.addEventListener("click",T),document.addEventListener("keydown",function(e){"Escape"===e.key&&T()});document.querySelectorAll(".mega-menu_link.is-current").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),T()})});document.querySelectorAll(".mega-menu_link").forEach(e=>{if(e.querySelector(".mega-menu_scroll-wrapper"))return;const t=e.textContent;if(!t||!t.trim())return;e.innerHTML="";const n=document.createElement("span");n.className="mega-menu_scroll-wrapper";const o=document.createElement("span");o.textContent=t,o.className="mega-menu_text";const s=document.createElement("span");s.textContent=t,s.className="mega-menu_text",s.setAttribute("aria-hidden","true"),n.appendChild(o),n.appendChild(s),e.appendChild(n)});const N=document.querySelector(".page-transition");let H;document.querySelectorAll(".inf-work_item").forEach(e=>e.classList.add("is-visible")),(()=>{const t=e(3);if(!t)return;const n=Array.from(document.querySelectorAll(".inf-work_item img"));n.length&&n.forEach(e=>t.observe(e))})(),(()=>{if(g(),!n||0===s.length||t())return n&&(n.classList.add("simple-layout"),A(s)),void k(s,!1);(()=>{if(!n||0===s.length)return;const e=Array.from(document.querySelectorAll(".inf-work_item:not(.is-clone)")),t=e.length;if(t>=8)return;if(0===t)return;const o=Math.ceil(8/t)*t-t;for(let s=0;s<o;s++){const o=e[s%t].cloneNode(!0);o.classList.add("is-clone"),o.removeAttribute("id"),n.appendChild(o)}g()})();const e=r,w=i,E=l;if(e.length<4)return n.classList.add("simple-layout"),e.forEach(e=>e.classList.add("is-visible")),void k(e,!1);c=!0,n.classList.remove("simple-layout"),n.classList.remove("filtered-layout"),k(e,!0),f=e[0].clientHeight||400,h=e.length/2*f,S(),q(0,w),q(0,E),e.forEach(e=>e.classList.add("is-visible"));let _=!1,b=0;const C=()=>{if(t()||!c||a)return void(_=!1);const e=Math.abs(d-y),n=Math.abs(d-u)+Math.abs(d-m),o=performance.now()-b<200;if(e>.05||n>.2||p||o){p=!1,y=d;const e=l;u+=.08*(d-u),m+=.07*(d-m),q(u,i),q(m,e),requestAnimationFrame(C)}else _=!1},x=()=>{_||(_=!0,requestAnimationFrame(C))};x(),v=x;const M=e=>{t()||!c||a||(d-=e.deltaY,p=!0,b=performance.now(),x())};o&&(L&&o.removeEventListener("wheel",L),L=M,o.addEventListener("wheel",L,{passive:!0}))})(),(()=>{const e=document.querySelectorAll("[data-inf-item]"),o=document.querySelector(".image-grid-info_holder"),s=document.querySelector("[data-image-grid-title]"),r=document.querySelector("[data-image-grid-copy]");e.forEach(i=>{if(i.dataset.hoverSetup)return;i.dataset.hoverSetup="true";const l=i.getAttribute("data-work-title")||"",a=i.getAttribute("data-work-copy")||"";i.addEventListener("mouseenter",function(){t()||(this.classList.add("highlight"),n&&n.classList.add("has-hover"),o&&o.classList.add("show"),s&&(s.textContent=l),r&&(r.textContent=a))}),i.addEventListener("mouseleave",function(){t()||(this.classList.remove("highlight"),n&&n.classList.remove("has-hover"),o&&o.classList.remove("show"))}),i.addEventListener("click",function(n){if(!t())return;this.classList.contains("show-description")||(n.preventDefault(),e.forEach(e=>{e.classList.remove("show-description")}),this.classList.add("show-description"))})})})(),document.querySelectorAll(".inf-work_link").forEach(e=>{e.dataset.transitionSetup||(e.dataset.transitionSetup="true",e.addEventListener("click",function(e){if(t()){const e=this.closest(".inf-work_item");if(!e||!e.classList.contains("show-description"))return}e.preventDefault();const n=this.getAttribute("href");N?(N.classList.add("is-active"),setTimeout(()=>{window.location.href=n},600)):window.location.href=n}))}),window.addEventListener("resize",()=>{clearTimeout(H),H=setTimeout(()=>{t()?(A(s),null==n||n.classList.add("simple-layout"),k(s,!1)):a||(g(),w(),k(r,c&&!a))},100)})});
