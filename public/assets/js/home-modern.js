import{c as e}from"./fetch-priority-observer-C6H-QDdu.js";document.addEventListener("DOMContentLoaded",function(){const t=()=>window.innerWidth<768,n=document.querySelector(".inf-work_list"),o=document.querySelector(".work-layout");let r=Array.from(document.querySelectorAll(".inf-work_item")),s=[],i=[],l=[],a=!1,c=!1,d=0,u=0,m=0,f=0,h=0,y=0,v=!1;let p=null;let g=null;const L=()=>{s=Array.from(document.querySelectorAll(".inf-work_item")),r=s,i=s.filter((e,t)=>t%2==0),l=s.filter((e,t)=>t%2==1)};L();const w=()=>{if(!s[0])return;const e=s[0].clientHeight;e>0&&e!==f&&(f=e,h=s.length/2*f,v=!0,"function"==typeof p&&p())};let E=null;const S=()=>{document.querySelectorAll(".inf-work_item img").forEach(e=>{if(e.dataset.dimensionsSetup)return;e.dataset.dimensionsSetup="true";const t=()=>{E||(E=setTimeout(()=>{E=null,L(),w()},0))};e.addEventListener("load",t,{once:!0}),e.addEventListener("error",t,{once:!0}),e.complete&&t()})},A=e=>{e.forEach(e=>{e.style.transform=""})},q=(e,t)=>{e.forEach(e=>{e.style.willChange=t?"transform":""})},k=(e,n)=>{t()||!c||a||n.forEach((t,n)=>{const o=((n*f+e)%h+h)%h-f;t.style.transform=`translate(0px, ${o}px)`})},_=Array.from(document.querySelectorAll(".grid-toggle_item[data-filter]")),b=(e,o)=>{_.forEach(e=>e.classList.remove("is-active")),o&&o.classList.add("is-active");const d=Array.from(document.querySelectorAll(".inf-work_item"));"all"===e?(d.forEach(e=>{e.style.display="",e.classList.remove("is-hidden")}),(()=>{if(n&&(a=!1,n.classList.remove("filtered-layout"),!t())){L();const e=s,t=l;c&&(k(u,i),k(m,t),q(e,!0))}})()):(n&&(a=!0,A(r),n.classList.add("filtered-layout"),n.classList.remove("simple-layout"),q(r,!1)),d.forEach(t=>{t.classList.contains("category-"+e)?(t.style.display="",t.classList.remove("is-hidden")):(t.style.display="none",t.classList.add("is-hidden"))}));const f=document.querySelector(".photos_total");if(f){const e=document.querySelectorAll(".inf-work_item:not(.is-hidden):not(.is-clone)");f.textContent=e.length}},C=_.length?_[0].closest(".work-toggle_holder"):null;C&&C.addEventListener("click",e=>{const t=e.target.closest(".grid-toggle_item[data-filter]");if(!t)return;const n=t.getAttribute("data-filter")||"all";e.preventDefault(),b(n,t)});const x=document.querySelector(".menu-btn"),M=document.querySelector(".menu-close"),D=document.querySelector(".menu-component");function T(){D&&(D.classList.remove("is-open"),document.body.style.overflow="")}x&&x.addEventListener("click",function(){D&&(D.classList.add("is-open"),document.body.style.overflow="hidden")}),M&&M.addEventListener("click",T),document.addEventListener("keydown",function(e){"Escape"===e.key&&T()});document.querySelectorAll(".mega-menu_link.is-current").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),T()})});document.querySelectorAll(".mega-menu_link").forEach(e=>{if(e.querySelector(".mega-menu_scroll-wrapper"))return;const t=e.textContent;if(!t||!t.trim())return;e.innerHTML="";const n=document.createElement("span");n.className="mega-menu_scroll-wrapper";const o=document.createElement("span");o.textContent=t,o.className="mega-menu_text";const r=document.createElement("span");r.textContent=t,r.className="mega-menu_text",r.setAttribute("aria-hidden","true"),n.appendChild(o),n.appendChild(r),e.appendChild(n)});const N=document.querySelector(".page-transition");window.addEventListener("pageshow",function(e){N&&N.classList.remove("is-active")});let H;document.querySelectorAll(".inf-work_item").forEach(e=>e.classList.add("is-visible")),(()=>{const t=e(3);if(!t)return;const n=Array.from(document.querySelectorAll(".inf-work_item:not(.is-clone) img"));n.length&&n.forEach(e=>t.observe(e))})(),(()=>{if(L(),!n||0===r.length||t())return n&&(n.classList.add("simple-layout"),A(r)),void q(r,!1);(()=>{if(!n||0===r.length)return;const e=Array.from(document.querySelectorAll(".inf-work_item:not(.is-clone)")),t=e.length;if(t>=8)return;if(0===t)return;const o=Math.ceil(8/t)*t-t;for(let r=0;r<o;r++){const o=e[r%t].cloneNode(!0);o.classList.add("is-clone"),o.removeAttribute("id"),n.appendChild(o)}L()})();const e=s,w=i,E=l;if(e.length<4)return n.classList.add("simple-layout"),e.forEach(e=>e.classList.add("is-visible")),void q(e,!1);c=!0,n.classList.remove("simple-layout"),n.classList.remove("filtered-layout"),q(e,!0),f=e[0].clientHeight||400,h=e.length/2*f,S(),k(0,w),k(0,E),e.forEach(e=>e.classList.add("is-visible"));let _=!1,b=0;const C=()=>{if(t()||!c||a)return void(_=!1);const e=Math.abs(d-y),n=Math.abs(d-u)+Math.abs(d-m),o=performance.now()-b<200;if(e>.05||n>.2||v||o){v=!1,y=d;const e=l;u+=.08*(d-u),m+=.07*(d-m),k(u,i),k(m,e),requestAnimationFrame(C)}else _=!1},x=()=>{_||(_=!0,requestAnimationFrame(C))};x(),p=x;const M=e=>{t()||!c||a||(e.preventDefault(),d-=e.deltaY,v=!0,b=performance.now(),x())};o&&(g&&o.removeEventListener("wheel",g),g=M,o.addEventListener("wheel",g))})(),(()=>{const e=document.querySelectorAll("[data-inf-item]"),o=document.querySelector(".image-grid-info_holder"),r=document.querySelector("[data-image-grid-title]"),s=document.querySelector("[data-image-grid-copy]");e.forEach(e=>{if(e.dataset.hoverSetup)return;e.dataset.hoverSetup="true";const i=e.getAttribute("data-work-title")||"",l=e.getAttribute("data-work-copy")||"";e.addEventListener("mouseenter",function(){t()||(this.classList.add("highlight"),n&&n.classList.add("has-hover"),o&&o.classList.add("show"),r&&(r.textContent=i),s&&(s.textContent=l))}),e.addEventListener("mouseleave",function(){t()||(this.classList.remove("highlight"),n&&n.classList.remove("has-hover"),o&&o.classList.remove("show"))})})})(),document.querySelectorAll(".inf-work_link").forEach(e=>{e.dataset.transitionSetup||(e.dataset.transitionSetup="true",e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href");N?(N.classList.add("is-active"),setTimeout(()=>{window.location.href=t},600)):window.location.href=t}))}),window.addEventListener("resize",()=>{clearTimeout(H),H=setTimeout(()=>{t()?(A(r),null==n||n.classList.add("simple-layout"),q(r,!1)):a||(L(),w(),q(s,c&&!a))},100)})});
