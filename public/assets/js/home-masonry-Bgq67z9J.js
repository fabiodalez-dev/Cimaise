import{H as e}from"./home-progressive-loader-BTmqzQak.js";import{c as t}from"./fetch-priority-observer-C6H-QDdu.js";!function(){function n(e=3){const n=t(e);return n?{observe(e){Array.from(e||[]).forEach(e=>n.observe(e))}}:null}function o(e){return Array.isArray(e)&&0!==e.length?e.join(", "):""}var r;r=()=>{document.documentElement.classList.add("no-lenis");const t=document.querySelector(".masonry-grid");if(!t)return;const r=window.homeLoaderConfig||null;if(!r||!r.hasMore){const e=n(3);return void(e&&e.observe(t.querySelectorAll("img")))}const s=document.getElementById("home-load-trigger"),i=document.getElementById("masonry-loading"),a=r.basePath||"",d=Number.parseInt(r.maxImages,10)||0,l=n(3);l&&l.observe(t.querySelectorAll("img"));let c=null;const m=e=>{i&&(i.classList.toggle("is-visible",e),i.setAttribute("aria-hidden",e?"false":"true"))};c=new e({apiUrl:`${a}/api/home/gallery`,container:t,shownImageIds:r.shownImageIds||[],shownAlbumIds:r.shownAlbumIds||[],batchSize:24,extraParams:{mode:"masonry"},renderImage:e=>{var n,r,s;if(!c)return;if(!e.album_slug)return;const i=e.fallback_src||e.url;if(!i)return;if(d>0&&c.shownImageIds.size>=d)return c.hasMore=!1,c.disconnect(),void m(!1);const u=document.createElement("div");u.className="masonry-item";const h=document.createElement("a");h.href=`${a}/album/${encodeURIComponent(e.album_slug)}`;const p=document.createElement("picture"),g=o(null==(n=e.sources)?void 0:n.avif),v=o(null==(r=e.sources)?void 0:r.webp),w=o(null==(s=e.sources)?void 0:s.jpg);if(g){const e=document.createElement("source");e.type="image/avif",e.srcset=g,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",p.appendChild(e)}if(v){const e=document.createElement("source");e.type="image/webp",e.srcset=v,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",p.appendChild(e)}if(w){const e=document.createElement("source");e.type="image/jpeg",e.srcset=w,e.sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw",p.appendChild(e)}const f=document.createElement("img");f.src=i,f.alt=e.alt||e.album_title||"",f.width=e.width||800,f.height=e.height||600,f.loading="lazy",f.decoding="async",f.style.aspectRatio=`${f.width} / ${f.height}`,p.appendChild(f),h.appendChild(p),u.appendChild(h),t.appendChild(u),l&&l.observe([f])}});const u=c.loadMore.bind(c);c.loadMore=async()=>{m(!0);try{await u()}finally{m(!1)}},s&&c.observe(s)},"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)}();
