import"./home-gallery.js";import{H as e}from"./home-progressive-loader-fswPtzne.js";import"./lenis-CfsBQfFC.js";var t;t=()=>{const e=document.getElementById("albums-carousel");if(!e)return;const t=e.parentElement,n=e.querySelectorAll(".album-carousel-item");if(!n.length)return;let r=0,a=0,o=!1,s=0,l=null;const i=()=>{const e=n[0],t=getComputedStyle(e);return e.offsetWidth+parseFloat(t.marginLeft)+parseFloat(t.marginRight)},c=i()*n.length,d=()=>{e.style.transform=`translate3d(${r}px, 0, 0)`},m=e=>e.type.includes("mouse")?e.clientX:e.touches[0].clientX,u=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,h=()=>{r-=.6,Math.abs(r)>=c&&(r=0),d(),l=requestAnimationFrame(h)};u||(l=requestAnimationFrame(h));const p=t=>{t.preventDefault(),t.stopPropagation(),o=!0,s=m(t),a=r,l&&(cancelAnimationFrame(l),l=null),e.classList.add("dragging"),document.body.style.userSelect="none"},g=e=>{if(!o)return;e.preventDefault(),e.stopPropagation();const t=m(e);r=a+(t-s),d()},v=()=>{const e=i()*n.length;Math.abs(r)>=e&&(r%=e),r>0&&(r=r%e-e)},f=()=>{o&&(o=!1,e.classList.remove("dragging"),document.body.style.userSelect="",v(),d(),u||setTimeout(()=>{l||(l=requestAnimationFrame(h))},1200))};e.addEventListener("mousedown",p),e.addEventListener("mousemove",g),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",f),e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("touchmove",g,{passive:!1}),e.addEventListener("touchend",f),e.addEventListener("dragstart",e=>e.preventDefault()),e.addEventListener("selectstart",e=>e.preventDefault()),u||(t.addEventListener("mouseenter",()=>{l&&(cancelAnimationFrame(l),l=null)}),t.addEventListener("mouseleave",()=>{l||o||(l=requestAnimationFrame(h))}));const b=t.parentElement.querySelector(".albums-arrow-left"),y=t.parentElement.querySelector(".albums-arrow-right"),E=()=>1*i();b&&b.addEventListener("click",()=>{r+=E(),v(),d()}),y&&y.addEventListener("click",()=>{r-=E(),v(),d()})},"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t),function(){function t(e,t,n){var r,a,o;const s=Number.parseInt(e.width,10),l=Number.parseInt(e.height,10),i=Number.isFinite(s)&&s>0?s:1600,c=Number.isFinite(l)&&l>0?l:1067,d=e=>e&&e.length?e.map(e=>{const n=e.split(" ");return`${n[0].startsWith("/")?t+n[0]:n[0]} ${n[1]||"1x"}`}).join(", "):"",m=d(null==(r=e.sources)?void 0:r.avif),u=d(null==(a=e.sources)?void 0:a.webp),h=d(null==(o=e.sources)?void 0:o.jpg),p=e.fallback_src||e.url,g=p.startsWith("/")?t+p:p,v=`${t}/album/${encodeURIComponent(e.album_slug||"")}`,f=e.alt||e.album_title||"",b=e.album_title||"",y=document.createElement("div");y.className=n?"home-cell-h":"home-cell";const E=document.createElement("div");E.className="home-item group rounded-xl overflow-hidden shadow-sm relative transition-transform hover:scale-105 duration-300",E.style.aspectRatio=`${i} / ${c}`,E.dataset.imageId=String(parseInt(e.id,10)||0);const w=document.createElement("a");w.href=v,w.className="block w-full h-full relative z-10",w.title=b;const L=document.createElement("picture");L.className="block w-full h-full";const x=(e,t)=>{if(!t)return;const n=document.createElement("source");n.type=e,n.srcset=t,n.sizes="(min-width:1024px) 50vw, (min-width:640px) 70vw, 100vw",L.appendChild(n)};x("image/avif",m),x("image/webp",u),x("image/jpeg",h);const A=document.createElement("img");A.src=g,A.alt=f,A.width=i,A.height=c,A.loading="lazy",A.decoding="async",A.className="w-full h-full object-cover block",A.addEventListener("load",()=>{E.classList.remove("loading")}),A.addEventListener("error",()=>{E.classList.remove("loading")}),L.appendChild(A);const I=document.createElement("div");I.className="absolute inset-0 bg-black/70 text-white flex items-center justify-center transform translate-y-full group-hover:translate-y-0 transition-transform duration-300";const S=document.createElement("span");return S.className="px-4 text-base md:text-lg lg:text-xl font-medium tracking-tight text-center",S.textContent=b,I.appendChild(S),w.appendChild(L),w.appendChild(I),E.appendChild(w),y.appendChild(E),y}!function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}(()=>{const n=document.getElementById("home-infinite-gallery");if(!n)return;n.style.opacity="1";const r=((e=3)=>{if(!("IntersectionObserver"in window))return null;let t=0;return new IntersectionObserver((n,r)=>{n.forEach(n=>{if(!n.isIntersecting)return;const a=n.target;t<e&&(a.setAttribute("fetchpriority","high"),a.removeAttribute("loading"),t+=1),r.unobserve(a)})},{rootMargin:"200px 0px 200px 0px",threshold:.1})})(3);r&&n.querySelectorAll("img").forEach(e=>r.observe(e));const a=window.homeLoaderConfig;if(a&&a.hasMore){const o=null!==n.closest('[data-scroll-direction="horizontal"]'),s=n.querySelector(".home-mobile"),l=o?Array.from(n.querySelectorAll(".home-track-h")):Array.from(n.querySelectorAll(".home-track"));let i=0;const c=new e({apiUrl:`${a.basePath}/api/home/gallery`,container:n,shownImageIds:a.shownImageIds,shownAlbumIds:a.shownAlbumIds,batchSize:20,renderImage:e=>{const n=t(e,a.basePath,o);if(s){const n=t(e,a.basePath,!1);n.className="home-cell",s.appendChild(n),r&&n.querySelectorAll("img").forEach(e=>r.observe(e))}if(l.length>0){l[i%l.length].appendChild(n),i++,r&&n.querySelectorAll("img").forEach(e=>r.observe(e))}}});c.startBackgroundLoading();const d=document.getElementById("home-load-trigger");d&&c.observe(d)}})}();
