import"./home-gallery-d0OICObY.js";import{H as e}from"./home-progressive-loader-BTmqzQak.js";import{c as t}from"./fetch-priority-observer-C6H-QDdu.js";import"./lenis-CfsBQfFC.js";var n;n=()=>{const e=document.getElementById("albums-carousel");if(!e)return;const t=e.parentElement,n=e.querySelectorAll(".album-carousel-item");if(!n.length)return;let a=0,o=0,l=!1,r=0,s=0,i=null,c=!1;const d=()=>{const e=n[0],t=getComputedStyle(e);return e.offsetWidth+parseFloat(t.marginLeft)+parseFloat(t.marginRight)},m=()=>{e.style.transform=`translate3d(${a}px, 0, 0)`},u=e=>e.type.includes("mouse")?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY};let h=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches;const p=window.matchMedia("(max-width: 767px)"),g=()=>{const e=d()*n.length;a-=.6,Math.abs(a)>=e&&(a=0),m(),i=requestAnimationFrame(g)},v=()=>{h||i||document.hidden||l||(i=requestAnimationFrame(g))},f=()=>{const e=h;h=p.matches,h&&i&&(cancelAnimationFrame(i),i=null),h||!e||l||v()};p.addEventListener("change",f),window.addEventListener("resize",f),h||("requestIdleCallback"in window?requestIdleCallback(v,{timeout:1e3}):setTimeout(v,100)),document.addEventListener("visibilitychange",()=>{document.hidden?i&&(cancelAnimationFrame(i),i=null):h||l||v()});const b=e=>{l=!0,c=!1;const t=u(e);r=t.x,s=t.y,o=a,i&&(cancelAnimationFrame(i),i=null),document.body.style.userSelect="none"},y=t=>{if(!l)return;const n=u(t),i=n.x-r,d=n.y-s,h=Math.abs(i)>8&&Math.abs(i)>Math.abs(d);(c||h)&&(t.preventDefault(),t.stopPropagation(),c||(c=!0,e.classList.add("dragging")),a=o+i,m())},w=()=>{const e=d()*n.length;Math.abs(a)>=e&&(a%=e),a>0&&(a=a%e-e)},E=()=>{l&&(l=!1,e.classList.remove("dragging"),document.body.style.userSelect="",w(),m(),h||setTimeout(v,1200))};e.addEventListener("click",e=>{c&&(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("mousedown",b),e.addEventListener("mousemove",y),e.addEventListener("mouseup",E),e.addEventListener("mouseleave",E),e.addEventListener("touchstart",b,{passive:!0}),e.addEventListener("touchmove",y,{passive:!1}),e.addEventListener("touchend",E),e.addEventListener("touchcancel",E),e.addEventListener("dragstart",e=>e.preventDefault()),e.addEventListener("selectstart",e=>e.preventDefault()),h||(t.addEventListener("mouseenter",()=>{i&&(cancelAnimationFrame(i),i=null)}),t.addEventListener("mouseleave",()=>{l||v()}));const L=t.parentElement.querySelector(".albums-arrow-left"),x=t.parentElement.querySelector(".albums-arrow-right"),C=()=>1*d();L&&L.addEventListener("click",()=>{a+=C(),w(),m()}),x&&x.addEventListener("click",()=>{a-=C(),w(),m()})},"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n),function(){function n(e,t,n){var a,o,l;const r=Number.parseInt(e.width,10),s=Number.parseInt(e.height,10),i=Number.isFinite(r)&&r>0?r:1600,c=Number.isFinite(s)&&s>0?s:1067,d=e=>e&&e.length?e.map(e=>{const n=e.split(" ");return`${n[0].startsWith("/")?t+n[0]:n[0]} ${n[1]||"1x"}`}).join(", "):"",m=d(null==(a=e.sources)?void 0:a.avif),u=d(null==(o=e.sources)?void 0:o.webp),h=d(null==(l=e.sources)?void 0:l.jpg),p=e.fallback_src||e.url||"",g=p&&p.startsWith("/")?t+p:p,v=`${t}/album/${encodeURIComponent(e.album_slug||"")}`,f=e.alt||e.album_title||"",b=e.album_title||"",y=document.createElement("div");y.className=n?"home-cell-h":"home-cell";const w=document.createElement("div");w.className="home-item group rounded-xl overflow-hidden shadow-sm relative transition-transform hover:scale-105 duration-300",w.style.aspectRatio=`${i} / ${c}`,w.dataset.imageId=String(parseInt(e.id,10)||0);const E=document.createElement("a");E.href=v,E.className="block w-full h-full relative z-10",E.title=b;const L=document.createElement("picture");L.className="block w-full h-full";const x=(e,t)=>{if(!t)return;const n=document.createElement("source");n.type=e,n.srcset=t,n.sizes="(min-width:1024px) 50vw, (min-width:640px) 70vw, 100vw",L.appendChild(n)};x("image/avif",m),x("image/webp",u),x("image/jpeg",h);const C=document.createElement("img");C.src=g,C.alt=f,C.width=i,C.height=c,C.loading="lazy",C.decoding="async",C.className="w-full h-full object-cover block",L.appendChild(C);const I=document.createElement("div");I.className="absolute inset-0 bg-black/70 text-white flex items-center justify-center transform translate-y-full group-hover:translate-y-0 transition-transform duration-300";const A=document.createElement("span");return A.className="px-4 text-base md:text-lg lg:text-xl font-medium tracking-tight text-center",A.textContent=b,I.appendChild(A),E.appendChild(L),E.appendChild(I),w.appendChild(E),y.appendChild(w),y}!function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}(()=>{const a=document.getElementById("home-infinite-gallery");if(!a)return;a.style.opacity="1";const o=t(3);o&&a.querySelectorAll("img").forEach(e=>o.observe(e));const l=window.homeLoaderConfig;if(l&&l.hasMore){const t=null!==a.closest('[data-scroll-direction="horizontal"]'),r=a.querySelector(".home-mobile"),s=t?Array.from(a.querySelectorAll(".home-track-h")):Array.from(a.querySelectorAll(".home-track"));let i=0;const c=new e({apiUrl:`${l.basePath}/api/home/gallery`,container:a,shownImageIds:l.shownImageIds,shownAlbumIds:l.shownAlbumIds,batchSize:20,renderImage:e=>{const a=n(e,l.basePath,t);if(r){const t=n(e,l.basePath,!1);t.className="home-cell",r.appendChild(t),o&&t.querySelectorAll("img").forEach(e=>o.observe(e))}if(s.length>0){s[i%s.length].appendChild(a),i++,o&&a.querySelectorAll("img").forEach(e=>o.observe(e))}}}),d=document.getElementById("home-load-trigger");d&&c.observe(d)}})}();
