import{g as e}from"./_commonjsHelpers-lGe4XDVY.js";var t={exports:{}},n={},r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||y}function S(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=b.prototype;var E=w.prototype=new S;E.constructor=w,v(E,b.prototype),E.isPureReactComponent=!0;var _=Array.isArray;function x(){}var R={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function I(e,t,n){var i=n.ref;return{$$typeof:r,type:e,key:t,ref:void 0!==i?i:null,props:n}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var H=/\/+/g;function $(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function T(e,t,n,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u,l,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case i:c=!0;break;case h:return T((c=e._init)(e._payload),t,n,s,o)}}if(c)return o=o(e),c=""===s?"."+$(e,0):s,_(o)?(n="",null!=c&&(n=c.replace(H,"$&/")+"/"),T(o,t,n,"",function(e){return e})):null!=o&&(C(o)&&(u=o,l=n+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(H,"$&/")+"/")+c,o=I(u.type,l,u.props)),t.push(o)),1;c=0;var f,d=""===s?".":s+":";if(_(e))for(var p=0;p<e.length;p++)c+=T(s=e[p],t,n,a=d+$(s,p),o);else if("function"==typeof(p=null===(f=e)||"object"!=typeof f?null:"function"==typeof(f=m&&f[m]||f["@@iterator"])?f:null))for(e=p.call(e),p=0;!(s=e.next()).done;)c+=T(s=s.value,t,n,a=d+$(s,p++),o);else if("object"===a){if("function"==typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(x,x):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function j(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},F={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};n.Activity=p,n.Children=F,n.Component=b,n.Fragment=s,n.Profiler=a,n.PureComponent=w,n.StrictMode=o,n.Suspense=f,n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,n.__COMPILER_RUNTIME={__proto__:null,c:function(e){return R.H.useMemoCache(e)}},n.cache=function(e){return function(){return e.apply(null,arguments)}},n.cacheSignal=function(){return null},n.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=v({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return I(e.type,i,r)},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:u,_context:e},e},n.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return I(e,s,i)},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:c,render:e}},n.isValidElement=C,n.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},n.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},n.startTransition=function(e){var t=R.T,n={};R.T=n;try{var r=e(),i=R.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(x,L)}catch(s){L(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),R.T=t}},n.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},n.use=function(e){return R.H.use(e)},n.useActionState=function(e,t,n){return R.H.useActionState(e,t,n)},n.useCallback=function(e,t){return R.H.useCallback(e,t)},n.useContext=function(e){return R.H.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e,t){return R.H.useDeferredValue(e,t)},n.useEffect=function(e,t){return R.H.useEffect(e,t)},n.useEffectEvent=function(e){return R.H.useEffectEvent(e)},n.useId=function(){return R.H.useId()},n.useImperativeHandle=function(e,t,n){return R.H.useImperativeHandle(e,t,n)},n.useInsertionEffect=function(e,t){return R.H.useInsertionEffect(e,t)},n.useLayoutEffect=function(e,t){return R.H.useLayoutEffect(e,t)},n.useMemo=function(e,t){return R.H.useMemo(e,t)},n.useOptimistic=function(e,t){return R.H.useOptimistic(e,t)},n.useReducer=function(e,t,n){return R.H.useReducer(e,t,n)},n.useRef=function(e){return R.H.useRef(e)},n.useState=function(e){return R.H.useState(e)},n.useSyncExternalStore=function(e,t,n){return R.H.useSyncExternalStore(e,t,n)},n.useTransition=function(){return R.H.useTransition()},n.version="19.2.3",t.exports=n;var M=t.exports;const O=e(M);class P{constructor(){this.observer=null,this.callbacks=new Map,this.visibilityStates=new Map}initializeObserver(){typeof window>"u"||this.observer||(this.observer=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,n=this.callbacks.get(t),r=this.visibilityStates.get(t),i=e.isIntersecting;n&&r!==i&&(this.visibilityStates.set(t,i),n(i))})},{threshold:0,rootMargin:"16px"}))}static getInstance(){return P.instance||(P.instance=new P),P.instance}observe(e,t){this.initializeObserver(),this.observer&&(this.callbacks.set(e,t),this.visibilityStates.set(e,!1),this.observer.observe(e))}unobserve(e){this.callbacks.delete(e),this.visibilityStates.delete(e),this.observer&&this.observer.unobserve(e)}disconnect(){this.observer&&this.observer.disconnect(),this.callbacks.clear(),this.visibilityStates.clear()}}const V=P.getInstance();class N{constructor(){this.currentScrollY=0,this.isScrolling=!1,this.scrollTimeoutId=null,this.scrollingListener=null,this.handleScroll=()=>{typeof window>"u"||(this.currentScrollY=window.scrollY,this.isScrolling||(this.isScrolling=!0,this.notifyScrollingState(!0)),null!==this.scrollTimeoutId&&clearTimeout(this.scrollTimeoutId),this.scrollTimeoutId=window.setTimeout(()=>{this.isScrolling=!1,this.notifyScrollingState(!1)},100))},typeof window<"u"&&(window.addEventListener("scroll",this.handleScroll,{passive:!0}),this.currentScrollY=window.scrollY)}static getInstance(){return N.instance||(N.instance=new N),N.instance}notifyScrollingState(e){this.scrollingListener&&this.scrollingListener(e)}onScrollingChange(e){this.scrollingListener=e,e(this.isScrolling)}getScrollY(){return this.currentScrollY}}const z=N.getInstance();class U{constructor(){this.callbacks=new Set,this.animationFrameId=null,this.visibleElementsCount=0,this.isScrolling=!1,z.onScrollingChange(e=>{this.isScrolling=e,this.updateRAFState()})}static getInstance(){return U.instance||(U.instance=new U),U.instance}register(e){this.callbacks.add(e),this.visibleElementsCount++,this.updateRAFState()}unregister(e){this.callbacks.has(e)&&(this.callbacks.delete(e),this.visibleElementsCount=Math.max(0,this.visibleElementsCount-1),this.updateRAFState())}updateRAFState(){const e=this.isScrolling&&this.visibleElementsCount>0;e&&null===this.animationFrameId?this.startRAF():!e&&null!==this.animationFrameId&&this.stopRAF()}startRAF(){if(typeof window>"u")return;const e=()=>{this.callbacks.forEach(e=>e()),this.animationFrameId=requestAnimationFrame(e)};this.animationFrameId=requestAnimationFrame(e)}stopRAF(){typeof window<"u"&&null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}}const Y=U.getInstance(),q=({isLoaded:e,imageHeight:t,scale:n,boundingClientRect:r,orientation:i,maxTransition:s})=>{const[o,a]=M.useState(""),u=M.useRef({rangeMax:0,lastImageHeight:0,lastScale:0,lastTranslateValue:-999999,lastTransformString:""}),l=(()=>{const[e,t]=M.useState(null);return M.useEffect(()=>{const e=()=>{t(window.innerHeight)};if(typeof window<"u")return t(window.innerHeight),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e})();return M.useEffect(()=>{if(!e||!r||!l)return;const o=u.current;(o.lastImageHeight!==t||o.lastScale!==n)&&(o.rangeMax=((e,t)=>e*t-e)(t,n),o.lastImageHeight=t,o.lastScale=n);let c=((e,t)=>{const{top:n,height:r}=e;let i=-r;if(n<i)return 0;if(n>t)return 100;const s=(n-i)/(t-i)*100;return Math.round(100*Math.min(Math.max(s,0),100))/100})(r,l);s&&(c=Math.min(c,100-s));const f=((e,t)=>Math.ceil(e/100*t-t/2))(c,o.rangeMax);if(o.lastTranslateValue!==f){const e=((e,t)=>{switch(t){case"up":default:return`0, ${e}px, 0`;case"right":return-e+"px, 0, 0";case"down":return`0, ${-e}px, 0`;case"left":return`${e}px, 0, 0`;case"up left":return`${e}px, ${e}px, 0`;case"up right":return`${-e}px, ${e}px, 0`;case"down left":return`${e}px, ${-e}px, 0`;case"down right":return`${-e}px, ${-e}px, 0`}})(f,i);e!==o.lastTransformString&&(o.lastTranslateValue=f,o.lastTransformString=e,a(e))}},[e,t,n,r,i,s,l]),o},D=({scale:e,overflow:t,delay:n,transition:r,orientation:i,maxTransition:s,isVisible:o,isLoaded:a,imageHeight:u,imageRef:l})=>{const[c,f]=M.useState(!1),[d,h]=M.useState(0),[p,m]=M.useState(null),[y,v]=M.useState(!1),g=(()=>{const[e,t]=M.useState(!1);return M.useEffect(()=>{if(typeof window>"u")return;const e=window.matchMedia("(prefers-reduced-motion: reduce)");t(e.matches);const n=e=>{t(e.matches)};return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}},[]),e})(),b=M.useCallback(()=>{var e;if(g||c&&!o)return;const t=z.getScrollY();if(c&&t===d)return;const n=null==(e=l.current)?void 0:e.getBoundingClientRect();n&&m(n),c||setTimeout(()=>{v(!0),f(!0)},50),h(t)},[g,o,c,d,l]),S=q({isLoaded:a,imageHeight:u,scale:e,boundingClientRect:p,orientation:i,maxTransition:s}),w=M.useCallback(n=>{if(!l.current||g||!n)return;let r=`translate3d(${n})`;t||(r+=` scale(${e})`),l.current.style.transform=r},[l,e,t,g]),E=M.useCallback(()=>{if(!l.current||g)return;const e=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t=n>0&&!e?`all ${n}s ${r}`:"";l.current.style.transition=t},[l,n,r,g]);M.useEffect(()=>(o&&!g?Y.register(b):Y.unregister(b),()=>{Y.unregister(b)}),[o,g,b]),M.useEffect(()=>{a&&l.current&&!g&&!c&&b()},[a,g,c,b]),M.useEffect(()=>{S&&(o||!c)&&(w(S),c||f(!0))},[S,o,c,w]),M.useEffect(()=>{!t&&a&&l.current&&!g&&(l.current.style.transform=`scale(${e})`)},[e,t,a,g]),M.useEffect(()=>{y&&E()},[y,E]),M.useEffect(()=>{g&&l.current&&(l.current.style.transform="",l.current.style.transition="")},[g])};const B=({delay:e=.4,orientation:t="up",scale:n=1.4,overflow:r=!1,transition:i="cubic-bezier(0,0,0,1)",maxTransition:s=null,children:o})=>{var a;const u=t??"up",l=n??1.2,c=null==(a=null==o?void 0:o.props)?void 0:a.src,[f,d,h]=(e=>{const[t,n]=M.useState(0),[r,i]=M.useState(!1),s=M.useRef(null),o=M.useCallback(()=>{s.current&&n(s.current.height)},[]);return M.useEffect(()=>{const e=()=>{i(!0),o()},t=s.current;return t&&(t.complete?e():t.addEventListener("load",e)),typeof window<"u"&&window.addEventListener("resize",o),()=>{t&&t.removeEventListener("load",e),typeof window<"u"&&window.removeEventListener("resize",o)}},[e,o]),[s,t,r]})(c),[p,m]=(()=>{const[e,t]=M.useState(!1),[n,r]=M.useState(!1),i=M.useRef(null),s=M.useRef();return M.useEffect(()=>{r(!0)},[]),M.useEffect(()=>{s.current=e=>{t(e)}}),M.useEffect(()=>{if(!n)return;const e=i.current;return e&&s.current?(V.observe(e,s.current),()=>{e&&(V.unobserve(e),V.disconnect())}):void 0},[n]),[i,e]})();D({scale:l,overflow:r,delay:e,transition:i,orientation:u,maxTransition:s,isVisible:m,isLoaded:h,imageHeight:d,imageRef:f});const y=O.isValidElement(o)?O.cloneElement(o,{ref:f}):null;return O.createElement("div",{ref:p,style:{overflow:r?"visible":"hidden"},__self:void 0,__source:{fileName:"/Users/geoffrey/Desktop/perso/simpleParallax.js/src/react/index.tsx",lineNumber:43,columnNumber:3}},y)};function G(){const e=document.querySelector(".js-hero-parallax");if(e)try{if("1"===e.dataset.parallaxInit)return;new B(e,{scale:1.8,delay:0,overflow:!0,orientation:"up",maxTransition:120,transition:"cubic-bezier(0.2, 0.6, 0, 1)"}),e.dataset.parallaxInit="1"}catch(t){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",G):G(),window.initHeroParallax=G;
